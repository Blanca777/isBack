## 事件循环机制

1. 浏览器的事件循环机制
2. node的事件循环机制

## 浏览器的事件循环机制

主线程 微任务 宏任务

微任务：promise

宏任务：script主体代码  setTimeout  setInterval

1. 执行主线程代码，遇到了setTimeout/setInterval，会将该宏任务异步任务中的回调放置在宏任务队列里面

2. 当遇到了Promise的时候，会将该任务 .then 里面的回调放置在微任务队列里

3. 主线程执行完成之后，先从微任务队列里面拿出任务执行

4. 微任务执行完成之后，再从宏任务队列里面拿出任务执行

5. 这一次微任务和宏任务里面可能还有其他的setTimeout或者Promise微任务或者宏任务，这些任务会放在下一次循环任务中执行

   

**注意：当执行微任务的时候，会将微任务里面的所有微任务执行完**